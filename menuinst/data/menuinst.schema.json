{
  "title": "MenuInstSchema",
  "description": "Metadata required to create menu items across operating systems with `menuinst`",
  "type": "object",
  "properties": {
    "menu_name": {
      "title": "Menu Name",
      "description": "Name for the category containing the items specified in `menu_items`.",
      "minLength": 1,
      "type": "string"
    },
    "menu_items": {
      "title": "Menu Items",
      "description": "List of menu entries to create across main desktop systems",
      "minItems": 1,
      "type": "array",
      "items": {
        "$ref": "#/definitions/MenuItem"
      }
    },
    "$id": {
      "title": "$Id",
      "description": "Version of the menuinst schema",
      "enum": [
        "https://schemas.conda.io/menuinst-1.schema.json"
      ],
      "type": "string"
    },
    "$schema": {
      "title": "$Schema",
      "description": "Standard of the JSON schema we adhere to",
      "enum": [
        "https://json-schema.org/draft-07/schema"
      ],
      "type": "string"
    }
  },
  "required": [
    "menu_name",
    "menu_items",
    "$id",
    "$schema"
  ],
  "additionalProperties": false,
  "definitions": {
    "Windows": {
      "title": "Windows",
      "description": "Windows-specific instructions. You can override global keys here if needed",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the menu item",
          "minLength": 1,
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "A longer description of the menu item. Shown on popup messages.",
          "type": "string"
        },
        "icon": {
          "title": "Icon",
          "description": "Path to the file representing or containing the icon.",
          "minLength": 1,
          "type": "string"
        },
        "precommand": {
          "title": "Precommand",
          "description": "(Simple, preferrably single-line) logic to run before the command is run. Runs before the env is activated, if that applies.",
          "type": "string"
        },
        "command": {
          "title": "Command",
          "description": "Command to run with the menu item, expressed as a list of strings where each string is an argument",
          "minItems": 1,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "working_dir": {
          "title": "Working Dir",
          "description": "Working directory for the running process. Defaults to user directory on each platform.",
          "minLength": 1,
          "type": "string"
        },
        "activate": {
          "title": "Activate",
          "description": "Whether to activate the target environment before running `command`.",
          "type": "boolean"
        },
        "terminal": {
          "title": "Terminal",
          "description": "Whether run the program in a terminal/console or not. On Windows, it only has an effect if activate is true. On MacOS, arguments are ignored.",
          "type": "boolean"
        },
        "desktop": {
          "title": "Desktop",
          "description": "Whether to create a desktop icon in addition to the Start Menu item.",
          "default": true,
          "type": "boolean"
        },
        "quicklaunch": {
          "title": "Quicklaunch",
          "description": "Whether to create a quick launch icon in addition to the Start Menu item.",
          "default": true,
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "Linux": {
      "title": "Linux",
      "description": "Linux-specific instructions. Check\nhttps://specifications.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html#recognized-keys\nfor more information. You can override global keys here if needed",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the menu item",
          "minLength": 1,
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "A longer description of the menu item. Shown on popup messages.",
          "type": "string"
        },
        "icon": {
          "title": "Icon",
          "description": "Path to the file representing or containing the icon.",
          "minLength": 1,
          "type": "string"
        },
        "precommand": {
          "title": "Precommand",
          "description": "(Simple, preferrably single-line) logic to run before the command is run. Runs before the env is activated, if that applies.",
          "type": "string"
        },
        "command": {
          "title": "Command",
          "description": "Command to run with the menu item, expressed as a list of strings where each string is an argument",
          "minItems": 1,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "working_dir": {
          "title": "Working Dir",
          "description": "Working directory for the running process. Defaults to user directory on each platform.",
          "minLength": 1,
          "type": "string"
        },
        "activate": {
          "title": "Activate",
          "description": "Whether to activate the target environment before running `command`.",
          "type": "boolean"
        },
        "terminal": {
          "title": "Terminal",
          "description": "Whether run the program in a terminal/console or not. On Windows, it only has an effect if activate is true. On MacOS, arguments are ignored.",
          "type": "boolean"
        },
        "Categories": {
          "title": "Categories",
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string",
              "pattern": "^.+;$"
            }
          ]
        },
        "DBusActivatable": {
          "title": "Dbusactivatable",
          "type": "boolean"
        },
        "GenericName": {
          "title": "Genericname",
          "type": "string"
        },
        "Hidden": {
          "title": "Hidden",
          "type": "boolean"
        },
        "Implements": {
          "title": "Implements",
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string",
              "pattern": "^.+;$"
            }
          ]
        },
        "Keywords": {
          "title": "Keywords",
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string",
              "pattern": "^.+;$"
            }
          ]
        },
        "MimeType": {
          "title": "Mimetype",
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string",
              "pattern": "^.+;$"
            }
          ]
        },
        "NoDisplay": {
          "title": "Nodisplay",
          "type": "boolean"
        },
        "NotShowIn": {
          "title": "Notshowin",
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string",
              "pattern": "^.+;$"
            }
          ]
        },
        "OnlyShowIn": {
          "title": "Onlyshowin",
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string",
              "pattern": "^.+;$"
            }
          ]
        },
        "PrefersNonDefaultGPU": {
          "title": "Prefersnondefaultgpu",
          "type": "boolean"
        },
        "StartupNotify": {
          "title": "Startupnotify",
          "type": "boolean"
        },
        "StartupWMClass": {
          "title": "Startupwmclass",
          "type": "string"
        },
        "TryExec": {
          "title": "Tryexec",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "_CFBundleURLTypes": {
      "title": "_CFBundleURLTypes",
      "type": "object",
      "properties": {
        "CFBundleTypeRole": {
          "title": "Cfbundletyperole",
          "type": "string"
        },
        "CFBundleURLSchemes": {
          "title": "Cfbundleurlschemes",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "CFBundleURLName": {
          "title": "Cfbundleurlname",
          "type": "string"
        },
        "CFBundleURLIconFile": {
          "title": "Cfbundleurliconfile",
          "type": "string"
        }
      },
      "required": [
        "CFBundleTypeRole",
        "CFBundleURLSchemes"
      ],
      "additionalProperties": false
    },
    "_CFBundleDocumentTypes": {
      "title": "_CFBundleDocumentTypes",
      "type": "object",
      "properties": {
        "CFBundleTypeIconFile": {
          "title": "Cfbundletypeiconfile",
          "pattern": "^.+\\.icns$",
          "type": "string"
        },
        "CFBundleTypeName": {
          "title": "Cfbundletypename",
          "type": "string"
        },
        "CFBundleTypeRole": {
          "title": "Cfbundletyperole",
          "anyOf": [
            {
              "enum": [
                "Editor"
              ],
              "type": "string"
            },
            {
              "enum": [
                "Viewer"
              ],
              "type": "string"
            },
            {
              "enum": [
                "Shell"
              ],
              "type": "string"
            },
            {
              "enum": [
                "None"
              ],
              "type": "string"
            }
          ]
        },
        "LSItemContentTypes": {
          "title": "Lsitemcontenttypes",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "LSHandlerRank": {
          "title": "Lshandlerrank",
          "anyOf": [
            {
              "enum": [
                "Owner"
              ],
              "type": "string"
            },
            {
              "enum": [
                "Default"
              ],
              "type": "string"
            },
            {
              "enum": [
                "Alternate"
              ],
              "type": "string"
            }
          ]
        }
      },
      "required": [
        "CFBundleTypeIconFile",
        "CFBundleTypeName",
        "CFBundleTypeRole",
        "LSItemContentTypes",
        "LSHandlerRank"
      ],
      "additionalProperties": false
    },
    "MacOS": {
      "title": "MacOS",
      "description": "Mac-specific instructions. Check theseURL for more info:\n- CF* keys: https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html\n- LS* keys: https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html\n- entitlements: list those which should be true for the shortcut signing\n  See https://developer.apple.com/documentation/bundleresources/entitlements.\n  \nYou can also override global keys here if needed.",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the menu item",
          "minLength": 1,
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "A longer description of the menu item. Shown on popup messages.",
          "type": "string"
        },
        "icon": {
          "title": "Icon",
          "description": "Path to the file representing or containing the icon.",
          "minLength": 1,
          "type": "string"
        },
        "precommand": {
          "title": "Precommand",
          "description": "(Simple, preferrably single-line) logic to run before the command is run. Runs before the env is activated, if that applies.",
          "type": "string"
        },
        "command": {
          "title": "Command",
          "description": "Command to run with the menu item, expressed as a list of strings where each string is an argument",
          "minItems": 1,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "working_dir": {
          "title": "Working Dir",
          "description": "Working directory for the running process. Defaults to user directory on each platform.",
          "minLength": 1,
          "type": "string"
        },
        "activate": {
          "title": "Activate",
          "description": "Whether to activate the target environment before running `command`.",
          "type": "boolean"
        },
        "terminal": {
          "title": "Terminal",
          "description": "Whether run the program in a terminal/console or not. On Windows, it only has an effect if activate is true. On MacOS, arguments are ignored.",
          "type": "boolean"
        },
        "CFBundleDisplayName": {
          "title": "Cfbundledisplayname",
          "type": "string"
        },
        "CFBundleIdentifier": {
          "title": "Cfbundleidentifier",
          "type": "string"
        },
        "CFBundleName": {
          "title": "Cfbundlename",
          "type": "string"
        },
        "CFBundleSpokenName": {
          "title": "Cfbundlespokenname",
          "type": "string"
        },
        "CFBundleVersion": {
          "title": "Cfbundleversion",
          "pattern": "^\\S+$",
          "type": "string"
        },
        "CFBundleURLTypes": {
          "$ref": "#/definitions/_CFBundleURLTypes"
        },
        "CFBundleDocumentTypes": {
          "$ref": "#/definitions/_CFBundleDocumentTypes"
        },
        "LSApplicationCategoryType": {
          "title": "Lsapplicationcategorytype",
          "pattern": "^public\\.app-category\\.\\S+$",
          "type": "string"
        },
        "LSBackgroundOnly": {
          "title": "Lsbackgroundonly",
          "type": "boolean"
        },
        "LSEnvironment": {
          "title": "Lsenvironment",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "LSMinimumSystemVersion": {
          "title": "Lsminimumsystemversion",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "type": "string"
        },
        "LSMultipleInstancesProhibited": {
          "title": "Lsmultipleinstancesprohibited",
          "type": "boolean"
        },
        "entitlements": {
          "title": "Entitlements",
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "[a-z0-9\\.\\-]+"
          }
        }
      },
      "additionalProperties": false
    },
    "Platforms": {
      "title": "Platforms",
      "description": "Platform specific options. Presence of a platform enables menu items in that platform",
      "type": "object",
      "properties": {
        "win": {
          "$ref": "#/definitions/Windows"
        },
        "linux": {
          "$ref": "#/definitions/Linux"
        },
        "osx": {
          "$ref": "#/definitions/MacOS"
        }
      },
      "additionalProperties": false
    },
    "MenuItem": {
      "title": "MenuItem",
      "description": "Instructions to create a menu item across operating systems.",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the menu item",
          "minLength": 1,
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "A longer description of the menu item. Shown on popup messages.",
          "type": "string"
        },
        "icon": {
          "title": "Icon",
          "description": "Path to the file representing or containing the icon.",
          "minLength": 1,
          "type": "string"
        },
        "precommand": {
          "title": "Precommand",
          "description": "(Simple, preferrably single-line) logic to run before the command is run. Runs before the env is activated, if that applies.",
          "minLength": 1,
          "type": "string"
        },
        "command": {
          "title": "Command",
          "description": "Command to run with the menu item, expressed as a list of strings where each string is an argument",
          "minItems": 1,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "working_dir": {
          "title": "Working Dir",
          "description": "Working directory for the running process. Defaults to user directory on each platform.",
          "minLength": 1,
          "type": "string"
        },
        "activate": {
          "title": "Activate",
          "description": "Whether to activate the target environment before running `command`.",
          "default": true,
          "type": "boolean"
        },
        "terminal": {
          "title": "Terminal",
          "description": "Whether run the program in a terminal/console or not. On Windows, it only has an effect if activate is true. On MacOS, arguments are ignored.",
          "default": false,
          "type": "boolean"
        },
        "platforms": {
          "$ref": "#/definitions/Platforms"
        }
      },
      "required": [
        "name",
        "description",
        "command",
        "platforms"
      ],
      "additionalProperties": false
    }
  }
}